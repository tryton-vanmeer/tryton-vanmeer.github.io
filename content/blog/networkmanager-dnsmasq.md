+++
title = "NetworkManager's dnsmasq plugin"
date = "2021-01-08"
description = "Using the NetworkManager dnsmasq plugin."
+++

NetworkManager in conjuntion with it's built-in local instance of dnsmasq allows for more advanced DNS configuration and opens up some usefull functionality.

## Enable NetworkManager's dnsmasq Plugin

Create a configuration file in `/etc/NetworkManager/conf.d` with the following:

```ini
[main]
dns=dnsmasq
```

You can now create files in `/etc/NetworkManager/dnsmasq.d` for configuring dnsmasq.

After all the configuration is done, restart NetworkManager.

```bash
$ systemctl restart NetworkManager

$ cat /etc/resolv.conf
# Generated by NetworkManager
nameserver 127.0.0.1
```

## What to Configure Next

- [libvirtd](/posts/networkmanager-dnsmasq-libvirtd/)
- [NGINX + localhost](/posts/networkmanager-dnsmasq-nginx-localhost/)
